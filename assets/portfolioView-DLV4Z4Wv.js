import{_ as I,a as L}from"./FooterComp.vue_vue_type_script_setup_true_lang-B-QLANLa.js";import{j as k,d as A,k as d,o as S,l as E,c as u,a as _,b as c,F as T,r as x,f,i as m}from"./index-D_EK269x.js";const b="https://cerebromax.site/v1";function P(){return fetch(`${b}/openApi?log_type=access`,{headers:{}})}function $(s,t){return fetch(`${b}/openApi/listPics?&class_=default,all_images_1000px,all_hd_images_2000px&page=${s}&size=${t}`,{headers:{}})}const j=k({id:"user",state:()=>({userType:1,userInfo:null,token:"",version:""}),actions:{getToken(){return this.token?this.token:this.userType===1?localStorage.getItem("token"):localStorage.getItem("accessToken")},async accessLog(){try{return await(await P()).json()}catch(s){return Promise.reject(s)}},async getImagesList(s,t){try{return await(await $(s,t)).json()}catch(a){return Promise.reject(a)}}}}),B=f('<div class="section-banner"><div class="container"><div class="section-banner-title"><h1>效果展示</h1><nav style="--bs-breadcrumb-divider:&#39;/&#39;;" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="index.html">首页</a></li><li class="breadcrumb-item active" aria-current="page">效果展示</li></ol></nav></div></div></div>',1),H={class:"gallery-area ptb-100"},M={class:"container"},V={class:"gallery-table","data-aos":"fade-up","data-aos-duration":"1500"},N=f('<div class="section-title"><div class="width"><div class="sub-t">图像生成器</div><h2>用 AI 展现新的创意视野</h2></div><ul class=""><li class="item-list play on" data-filter="All">全部</li></ul></div>',1),U={class:"gallery"},z={class:"item-box All Brand"},C=["src"],v=5,W=A({__name:"portfolioView",setup(s){const t=j(),a=d([]),i=d(!1),n=d([]),g=()=>{let e=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.clientHeight,l=document.documentElement.scrollHeight;e+o>=l&&(console.log("加载更多 ..."),h())},h=async()=>{if(n.value.length!==0&&!i.value)try{i.value=!0;const e=Math.floor(Math.random()*n.value.length),o=n.value[e];n.value.splice(e,1);const w=(await t.getImagesList(o,v)).docs.map(r=>r.url.search(/.+\?.+/)!=-1?r.url+"&w=512":r.url+"?w=512");for(const r of w)a.value.includes(r)||a.value.push(r)}catch(e){console.log(e)}finally{i.value=!1}},y=async()=>{const o=(await t.getImagesList(1,v)).pages;n.value=Array.from({length:o},(l,p)=>p+1)};return S(()=>{y().then(()=>{h().then(()=>{window.addEventListener("scroll",g)})})}),E(()=>{try{window.removeEventListener("scroll",g)}catch(e){console.log(e)}}),(e,o)=>(m(),u("div",null,[_(I),B,c("div",H,[c("div",M,[c("div",V,[N,c("div",U,[(m(!0),u(T,null,x(a.value,l=>(m(),u("div",z,[c("img",{src:l,alt:"image"},null,8,C)]))),256))])])])]),_(L)]))}});export{W as default};
